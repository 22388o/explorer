<!doctype html>
<html lang="en"
      layout:decorate="~{util/fragments/layouts/default_layout}"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout">

<!--/* =========================================================================================================== */-->
<div layout:fragment="content">

    <!--/* ======================================================================================================= */-->
    <!--/* Error management */-->
    <div class="w-1/3 pt-12">

        <!--/* No value for the "requestId" parameter */-->
        <sl-alert open th:if="${#strings.isEmpty(requestId)}" variant="danger">
            <sl-icon name="exclamation-octagon" slot="icon"></sl-icon>
            <strong th:text="#{generic.error}"></strong><br/>
            <div th:text="#{request.view.error.noRequestId}"></div>
        </sl-alert>

        <!--/* We have the "requestId" parameter but the request was not found */-->
        <sl-alert open th:if="${!#strings.isEmpty(requestId) && result == null}" variant="danger">
            <sl-icon name="exclamation-octagon" slot="icon"></sl-icon>
            <strong th:text="#{generic.error}"></strong><br/>
            <div th:text="#{request.view.error.requestNotFound(${requestId})}"></div>
        </sl-alert>

    </div>

    <!--/* ======================================================================================================= */-->
    <!--/* Display request */-->
    <div class="w-4/5 flex flex-col items-center justify-center" th:if="${result != null}">

        <div class="head">

            <!--*/ Header */-->
            <div class="tableHead">
                <h3 class="tableHeadDescription" th:text="'Request ' + ${result.requestId}"></h3>
            </div>

            <!--/* Data */-->
            <div class="tableLines">
                <dl>
                    <!--/* Request id */-->
                    <div class="tableLineWhite">
                        <dt class="tableLineDescription" th:text="#{field.asset.requestId}"></dt>
                        <dd class="tableLineValue" th:text="${result.requestId}"></dd>
                    </div>
                    <!--/* Creator */-->
                    <div class="tableLineGray">
                        <dt class="tableLineDescription" th:text="#{field.asset.creator.username}"></dt>
                        <dd class="tableLineValue" th:text="${result.creator.username}"></dd>
                    </div>
                    <!--/* Request status */-->
                    <div class="tableLineWhite">
                        <dt class="tableLineDescription" th:text="#{field.asset.status}"></dt>
                        <dd class="tableLineValue" th:if="${#strings.equals(result.status, 'OPENED')}"
                            th:text="#{status.opened}"></dd>
                        <dd class="tableLineValue" th:if="${#strings.equals(result.status, 'FAILURE')}"
                            th:text="#{status.failure}"></dd>
                        <dd class="tableLineValue" th:if="${#strings.equals(result.status, 'SUCCESS')}"
                            th:text="#{status.success}"></dd>
                    </div>
                    <!--/*  Error message (if failure) */-->
                    <div class="tableLineGray" th:if="${#strings.equals(result.status, 'FAILURE')}">
                        <dt class="tableLineDescription" th:text="#{field.asset.errorMessage}"></dt>
                        <dd class="tableLineValue" th:text="${result.errorMessage}"></dd>
                    </div>
                </dl>
            </div>
        </div>

        <br/>

        <!--/* View asset */-->
        <div th:if="${#strings.equals(result.status, 'SUCCESS')}">
            <sl-button outline
                       th:href="@{'/asset/' + ${result.asset.assetId}}"
                       th:text="#{request.button.asset.view}"
                       variant="primary">
            </sl-button>
        </div>

    </div>
</div>
<!-- =============================================================================================================== -->

</html>